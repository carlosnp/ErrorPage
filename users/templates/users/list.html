{% extends "base.html" %}

{% block title %} {{block.super}} User | List {% endblock %}

{% block content %}
	<h1 style="color:#babdc1;">Control de Usuarios</h1>
	<a class="botones" href="{% url 'users:create' %}">Crear Usuario</a>
	<hr>
	<div class="container-fluid">
		<table id="TableMaster" class="table table-striped table-bordered responsive nowrap" data-page-length="10" style="width:100%">
			<thead>
				<tr>
					<td></td>
					<td>Usuario</td>
					<td>Nombre</td>
					<td>Apellido</td>
					<td>Teléfono</td>
					<td>Email</td>
					<td>Fecha de Actualización</td>
					<td></td>
				</tr>
			</thead>
			<tbody>
				{% for instance in object_list %}
				<tr>
					<td></td>
					<td> 
						{{ instance.username }} 
						<!--
						<a href="{{ instance.get_absolute_url }}"> 
						</a>
						--> 
					</td>
					<td style="text-transform: capitalize;"> {{ instance.first_name }} </td>
					<td style="text-transform: capitalize;"> {{ instance.last_name }} </td>
					<td> {{ instance.phone }} </td>
					<td> {{ instance.email }} </td>
					<td> {{ instance.updated|date}} </td>
					<td> 
						<a href="{% url 'users:update' pk=instance.id %}">Editar</a>
						<a href="{% url 'users:delete' pk=instance.id %}">Eliminar</a>
					</td>
				</tr>
				{% endfor %}
			</tbody>
			<tfoot>
				<tr>
					<td></td>
					<td>Nombre de Usuario</td>
					<td>Nombre</td>
					<td>Apellido</td>
					<td>Teléfono</td>
					<td>Email</td>
					<td>Fecha de Actualización</td>
					<td></td>
				</tr>
			</tfoot>
		</table>
	</div>

<!-- Modal -->


{% endblock %}

{% block extraJs %}
{% load staticfiles %}
	<script>
		$(document).ready(function() {
			// DataTable configuracion
		    $('#TableMaster').DataTable({
		    	responsive: {
		            details: {
		                type: 'column',
		                target: 0,
		                display: $.fn.dataTable.Responsive.display.modal({
		                    header: function ( row ) {
		                        var data = row.data();
		                        return 'Details for '+data[0]+' '+data[1];
		                    }
		                }),
		                renderer: $.fn.dataTable.Responsive.renderer.tableAll({
		                	tableClass: 'table'
		                }),
		            },
		        },
		        // dom: 'Bfrtip',
		        dom: 'Blfrtip',
		        buttons: [
		        	{
		        		extend: 'copyHtml5',
		        		text: 'Copiar',
		        		className: 'copyButton',	
		        	},
		            {
		            	extend: 'excelHtml5',
		            	title: 'User Data Export to Excel',
		            	messageBottom: 'ErrorPage Users'
		            },
		            {
		            	extend: 'pdfHtml5',
		            	download: 'open',	
		            	title: 'User Data Export to pdf',
		            	messageBottom: 'ErrorPage Users',
		            },
		            {
		            	extend: 'csvHtml5',
		            	title: 'User Data Export to csv',
		            	messageBottom: 'ErrorPage Users'
		            },
		            {
		                extend: 'print',
		                text: 'Imprimir',
		                exportOptions: {
		                    columns: ':visible'
		                }
		            },
		            {
		            	extend: 'colvis',
		            	text: 'Columnas Visibles',
		            	columns: ':not(.noVis)',
		            	postfixButtons: [ 
			            	{
			            		extend: 'colvisRestore',
			            		text: 'Restaurar' 
			            	}
		            	]
		            },
		        ],
		        columnDefs: [
		        	{
		        		className: 'control',
		        		orderable: false,	
		        		targets: 0,
		        	}, 
			        {
		                targets: 1,
		                className: 'noVis',
		                visible: true,
		                responsivePriority: 1
		            },
		            {
			            targets: -1,
			            visible: true,
			            responsivePriority: 2
			        },
		        ],
		        order: [ 1, 'asc' ],
		        "lengthMenu": [ 5, 10, 15, 20, 25 ],
		    	"language": {
		    		"processing":"Procesando...",
		            "lengthMenu": "_MENU_ registros por página",
		            "zeroRecords": "No se encuentran conincidencias - Lo siento",
		            "info": "Mostrando la página _PAGE_ de _PAGES_",
		            "infoEmpty": "No hay registros disponibles",
		            "infoFiltered": "(filtrados de _MAX_ registros totales)",
		            "search": "Buscar",
		            "url":"",
		            "loadingRecords": "Cargando...",
		            "oPaginate": {
				        "sFirst":    "Primero",
				        "sLast":     "Último",
				        "sNext":     "Siguiente",
				        "sPrevious": "Anterior"
				    },
				    buttons: {
				    	copyTitle: 'Ajouté au presse-papiers',
				    },
				    "oAria": {
				        "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
				        "sSortDescending": ": Activar para ordenar la columna de manera descendente"
				    }
		        },
		    });
		} );
	</script>
{% endblock extraJs %}